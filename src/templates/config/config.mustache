/**
 * Lang Tag CLI Configuration
 * 
 * This file was generated. You can modify it to customize your translation workflow.
 * Documentation: https://github.com/TheTonsOfCode/lang-tag-cli
 */

{{#needsAlgorithms}}
{{#isCJS}}const{{/isCJS}}{{^isCJS}}import{{/isCJS}} {
{{#needsPathBasedImport}}
    pathBasedConfigGenerator,
{{/needsPathBasedImport}}
{{#useKeeper}}
    configKeeper,
{{/useKeeper}}
{{#isDictionary}}
    DictionaryCollector,
{{/isDictionary}}
{{#importLibraries}}
    flexibleImportAlgorithm,
{{/importLibraries}}
} {{#isCJS}}= require('@lang-tag/cli/algorithms');{{/isCJS}}{{^isCJS}}from '@lang-tag/cli/algorithms';{{/isCJS}}
{{/needsAlgorithms}}

{{#needsPathBasedImport}}
{{>generation-algorithm}}

{{/needsPathBasedImport}}
{{#useKeeper}}
    const keeper = configKeeper({ propertyName: 'keep' });

{{/useKeeper}}
/** @type {import('@lang-tag/cli/type').LangTagCLIConfig} */
const config = {
{{#needsTagName}}
    tagName: '{{tagName}}',
{{/needsTagName}}
{{#isLibrary}}
    isLibrary: true,
{{/isLibrary}}
    includes: [{{includes}}],
    excludes: [{{excludes}}],
{{^isLibrary}}
    localesDirectory: '{{localesDirectory}}',
{{/isLibrary}}
    baseLanguageCode: '{{baseLanguageCode}}',
{{#hasConfigGeneration}}
{{#usePathBased}}
    onConfigGeneration: async event => {
        // We do not modify imported configurations
        if (event.isImportedLibrary) return;
{{#useKeeper}}
        if (event.config?.keep === 'both') return;
{{/useKeeper}}
        
        await generationAlgorithm(event);
{{#useKeeper}}
        await keeper(event);
{{/useKeeper}}
    },
{{/usePathBased}}
{{#useCustom}}
    onConfigGeneration: async event => {
        // We do not modify imported configurations
        if (event.isImportedLibrary) return;

{{#useKeeper}}
        if (event.config?.keep === 'both') return;
{{/useKeeper}}
        // TODO: Implement your custom config generation logic here
        // event.config = {
        //     namespace: 'your-namespace',
        //     path: 'your.path'
        // };
{{#useKeeper}}
        await keeper(event);
{{/useKeeper}}
    },
{{/useCustom}}
{{/hasConfigGeneration}}
    collect: {
{{#isDictionary}}
        collector: new DictionaryCollector(),
{{/isDictionary}}
{{^isDictionary}}
        defaultNamespace: '{{defaultNamespace}}',
{{/isDictionary}}
{{#interfereWithCollection}}
        onConflictResolution: async event => {
            await event.logger.conflict(event.conflict, true);
            // By default, continue processing even if conflicts occur
            // Call event.exit(); to terminate the process upon the first conflict
        },
        onCollectFinish: event => {
            if (event.conflicts.length) event.exit(); // Stop the process to avoid merging on conflict
        }
{{/interfereWithCollection}}
    },
{{#importLibraries}}
    import: {
        dir: 'src/lang-libraries',
        tagImportPath: 'import { {{tagName}} } from "@/my-lang-tag-path"',
        onImport: flexibleImportAlgorithm({ filePath: { includePackageInPath: true } })
    },
{{/importLibraries}}
};

{{#isCJS}}module.exports = config;{{/isCJS}}{{^isCJS}}export default config;{{/isCJS}}
